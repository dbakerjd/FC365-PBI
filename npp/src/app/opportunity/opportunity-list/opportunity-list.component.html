<app-npp-header [isHome]="false"></app-npp-header>
<div class="opportunity-filter-wrapper">
    <div class="opportunity-filter">
        <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <formly-form [form]="form" [fields]="fields" [model]="model" (change)="onSubmit()"></formly-form>
        </form>
    </div>
    <div class="opportunity-add">
        <div class="npp-btn" (click)="createOpportunity()">Add Opportunity</div>
    </div>
</div>
<div class="opportunity-list-wrapper">
    <div class="opportunity-list-item" *ngFor="let item of opportunities">
        <div class="opportunity-status">
            <div>
                <div class="opportunity-active" *ngIf="item.opportunityStatus == 'Active'"></div>
                <div class="opportunity-archived" *ngIf="item.opportunityStatus == 'Archived'"></div>
                {{item.OpportunityStatus}}
            </div>
            <p><label>Type: </label>{{item.OpportunityType?.Title}}</p>
        </div>
        <div class="opportunity-name" (click)="navigateTo(item)">
            <p class="opportunity-title">{{item.Title}}</p>
            <p><label>Molecule Name: </label> {{item.MoleculeName}}</p>
            <p><label>Indication: </label> {{item.IndicationId}}</p>
        </div>
        <div class="opportunity-progress" (click)="navigateTo(item)">
            <p><label>Progress:</label> {{item.progress}}% <app-progress-bar [progress]="item.progress"></app-progress-bar></p>
            <p><label>Opportunity Owner: </label> {{item.opportunityOwner?.name}}</p>
            <p><label>Project End Date: </label> {{item.ProjectEndDate | date : 'MMM y'}}</p>
            <p><label>Therapy Area: </label> {{item.therapyArea}}</p>
        </div>
    </div>
</div>
